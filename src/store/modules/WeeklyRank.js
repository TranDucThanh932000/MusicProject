export default {
    namespaced: true,
    state: () => ({
        listSong: {
            vietnam: [
                {
                    img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
                    title: "Nếu ngày ấy",
                    singer: "Soobin",
                    album: "Playah (Album)",
                    time: "03:44",
                    src: 'thay-moi-co-gai-yeu-anh.mp3'
                },
                {
                    img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
                    title: "Nếu ngày ấy",
                    singer: "Soobin",
                    album: "Playah (Album)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
                    title: "Nếu ngày ấy",
                    singer: "Soobin",
                    album: "Playah (Album)",
                    time: "03:44",
                    src: 'thay-moi-co-gai-yeu-anh.mp3'
                },
                {
                    img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
                    title: "Nếu ngày ấy",
                    singer: "Soobin",
                    album: "Playah (Album)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
                    title: "Nếu ngày ấy",
                    singer: "Soobin",
                    album: "Playah (Album)",
                    time: "03:44",
                    src: 'thay-moi-co-gai-yeu-anh.mp3'
                }
            ],
            usuk: [
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
            ],
            kpop: [
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
                {
                    img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
                    title: "Chạy Về Khóc Với Anh",
                    singer: "Erik",
                    album: "Chạy Về Khóc Với Anh (Single)",
                    time: "03:44",
                    src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
                },
            ]
        },
        songs: [],
        pause: false,
        index_weekly_rank: -1

    }),
    getters: {
        listSong: state => state.listSong,
        songs: state => state.songs,
        pause: state => state.pause,
        index_weekly_rank: state => state.index_weekly_rank
    },
    actions: {
        updateListSong({ commit }, payload) {
            commit('updateListSong', payload)
        },
        updateSongs({ commit }, payload) {
            commit('updateSongs', payload)
        },
        checkPause({commit, getters, dispatch}, payload){
            if(getters.songs[payload]){
                commit('updateSongs', new Array(getters.songs.length).fill(false))
                commit('updatePause', false)
                commit('index_weekly_rank', payload)
                dispatch('fixedplay/playAudio', true, { root: true })
            }else{
                commit('updateSongs', new Array(getters.songs.length).fill(false))
                getters.songs[payload] = true
                commit('updatePause', true)
                let indexBeforeChange = getters.index_weekly_rank
                var temp = []
                if(payload >= 0 && payload < 5){
                    if(!(indexBeforeChange >= 0 && indexBeforeChange < 5)){
                        dispatch('fixedplay/updateSongs', getters.listSong.vietnam, { root: true })
                    }
                    dispatch('fixedplay/updateLiveSong', getters.listSong.vietnam[payload], { root: true })
                    for(let i = payload; i < getters.listSong.vietnam.length; i++){
                        temp.push(getters.listSong.vietnam[i])
                    }
                    dispatch('sidebarRight/updateItems', temp, { root: true })
        
                    temp = []
                    for(let i = 0; i <= payload; i++){
                        temp.push(getters.listSong.vietnam[i])
                    }
                    dispatch('sidebarRight/updateSongPlayed', temp, { root: true })
                    dispatch('fixedplay/updateNameSpacedComponent', 'weeklyRankVietNam', { root: true})
                    dispatch('fixedplay/updateIndexSong', payload, { root: true })
                }else if(payload >= 5 && payload < 10){
                    if(!(indexBeforeChange >= 5 && indexBeforeChange < 10)){
                        dispatch('fixedplay/updateSongs', getters.listSong.usuk, { root: true })
                    }
                    dispatch('fixedplay/updateLiveSong', getters.listSong.usuk[payload - 5], { root: true })
                    for(let i = payload - 5; i < getters.listSong.vietnam.length; i++){
                        temp.push(getters.listSong.usuk[i])
                    }
                    dispatch('sidebarRight/updateItems', temp, { root: true })
        
                    temp = []
                    for(let i = 0; i <= payload - 5; i++){
                        temp.push(getters.listSong.usuk[i])
                    }
                    dispatch('sidebarRight/updateSongPlayed', temp, { root: true })
                    dispatch('fixedplay/updateNameSpacedComponent', 'weeklyRankUsuk', { root: true})
                    dispatch('fixedplay/updateIndexSong', payload - 5, { root: true })
                }else if(payload >= 10 && payload <= 14){
                    if(!(indexBeforeChange >= 10 && indexBeforeChange < 14)){
                        dispatch('fixedplay/updateSongs', getters.listSong.kpop, { root: true })
                    }
                    dispatch('fixedplay/updateLiveSong', getters.listSong.kpop[payload - 10], { root: true })
                    for(let i = payload - 10; i < getters.listSong.vietnam.length; i++){
                        temp.push(getters.listSong.kpop[i])
                    }
                    dispatch('sidebarRight/updateItems', temp, { root: true })
        
                    temp = []
                    for(let i = 0; i <= payload - 10; i++){
                        temp.push(getters.listSong.kpop[i])
                    }
                    dispatch('sidebarRight/updateSongPlayed', temp, { root: true })
                    dispatch('fixedplay/updateNameSpacedComponent', 'weeklyRankKpop', { root: true})
                    dispatch('fixedplay/updateIndexSong', payload - 10, { root: true })
                }
                commit('index_weekly_rank', payload)
    
                var aud = document.getElementById("myAudio")
                aud.load()
                dispatch('fixedplay/playAudio', false, { root: true })
                
            }
        },
        index_weekly_rank({commit}, payload){
            commit('index_weekly_rank', payload)
        }
    },
    mutations: {
        updateListSong(state, payload) {
            state.listSong = payload
        },
        updateSongs(state, payload) {
            state.songs = payload
        },
        updatePause(state, payload) {
            state.pause = payload
        },
        index_weekly_rank(state, payload){
            state.index_weekly_rank = payload
        }
    }
}