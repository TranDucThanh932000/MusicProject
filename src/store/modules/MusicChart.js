export default {
    namespaced: true,
    state: () => ({
        listTop100: [
            {
              img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
              title: "Nếu ngày ấy",
              singer: "Soobin",
              album: "Playah (Album)",
              time: "03:44",
              src: 'thay-moi-co-gai-yeu-anh.mp3'
            },
            {
              img: "https://images.genius.com/cfb3f64ab2fc08506b2365b1d8ab959b.600x600x1.webp",
              title: "Thay mọi cô gái yêu anh",
              singer: "AMEE",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'thay-moi-co-gai-yeu-anh.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
              img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
              title: "Chạy Về Khóc Với Anh",
              singer: "Erik",
              album: "Chạy Về Khóc Với Anh (Single)",
              time: "03:44",
              src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
          ],
          songs: [],
          color: "transparent",
          appear_top100: false,
    }),
    getters: {
        listTop100: state => state.listTop100,
        color: state => state.color,
        songs: state => state.songs,
        appear_top100: state => state.appear_top100,
    },
    actions: {
        checkPause({commit, getters, dispatch, rootGetters}, index) {
            if (getters.songs[index] == true) {
                commit('updatePause', new Array(getters.songs.length).fill(false))
                commit('updatePlay', true,  { root: true })
                dispatch('fixedplay/playAudio', true, { root: true })
                dispatch('fixedplay/updateLiveSong', getters.listTop100[index], {root : true})
              return;
            }
            commit('updatePause', new Array(getters.songs.length).fill(false))
            getters.songs[index] = true;

            if(getters.listTop100[index].src != rootGetters.srcPlay){
              //sau khi update src moi thi load() lai audio
              var aud = document.getElementById("myAudio")
              aud.load()
              dispatch('fixedplay/updateLiveSong', getters.listTop100[index], {root : true})
            }

            commit('updateSrcPlay', getters.listTop100[index].src, {root: true})
            commit('fixedplay/src', getters.listTop100[index].src, {root: true})

            commit('updatePlay', false,  { root: true })
            dispatch('fixedplay/playAudio', false, { root: true })
          },
        updateAppearTop100({commit, getters}){
            commit('updateAppearTop100', !getters.appear_top100)
        }
    },
    mutations: {
        updatePause(state, payload){
            state.songs = payload
        },
        updateAppearTop100(state, payload){
            state.appear_top100 = payload
        }
    }
}