export default {
    namespaced: true,
    state : () => ({
        srcImg: 'https://httl.com.vn/wiki/wp-content/uploads/2021/07/imager_1_13161_700.jpg',
        listTop100: [
            {
            img: "https://photo-resize-zmp3.zadn.vn/w240_r1x1_jpeg/cover/5/c/b/2/5cb27fd4c536a2274d267a53ac417b01.jpg",
            title: "Nếu ngày ấy",
            singer: "Soobin",
            album: "Playah (Album)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://images.genius.com/cfb3f64ab2fc08506b2365b1d8ab959b.600x600x1.webp",
            title: "Thay mọi cô gái yêu anh",
            singer: "AMEE",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'thay-moi-co-gai-yeu-anh.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'thay-moi-co-gai-yeu-anh.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "thay mọi cô gái yêu anh (Single)",
            time: "03:44",
            src: 'thay-moi-co-gai-yeu-anh.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
            {
            img: "https://i.ytimg.com/vi/EBpp2VTSI2Q/maxresdefault.jpg",
            title: "Chạy Về Khóc Với Anh",
            singer: "Erik",
            album: "Chạy Về Khóc Với Anh (Single)",
            time: "03:44",
            src: 'em-bo-hut-thuoc-chua-liu-riu-Bich-Phuong.mp3'
            },
        ],
        songs: [],
        playing: false,
        borderRadius: '10%',
        height: 0,
        singers: [
            {img: 'https://i.ytimg.com/vi/oiikgEzTotg/maxresdefault.jpg',name: 'Đức Phúc',follow: '399K'},
            {img: 'https://i.ytimg.com/vi/oiikgEzTotg/maxresdefault.jpg',name: 'Đức Phúc',follow: '399K'},
            {img: 'https://i.ytimg.com/vi/oiikgEzTotg/maxresdefault.jpg',name: 'Đức Phúc',follow: '399K'},
            {img: 'https://i.ytimg.com/vi/oiikgEzTotg/maxresdefault.jpg',name: 'Đức Phúc',follow: '399K'},
            {img: 'https://i.ytimg.com/vi/oiikgEzTotg/maxresdefault.jpg',name: 'Đức Phúc',follow: '399K'}
        ]
    }),
    getters: {
        srcImg : state => state.srcImg,
        listTop100 : state => state.listTop100,
        songs : state => state.songs,
        playing : state => state.playing,
        borderRadius : state => state.borderRadius,
        height : state => state.height,
        singers : state => state.singers,
    },
    actions: {
        updateHeight({commit}, payload){
            commit('updateHeight',payload)
        },
        checkPause({dispatch,commit, getters, rootGetters},payload) {
            if (getters.songs[payload] == true) {
                commit('updateSongs', new Array(getters.songs.length).fill(false))
                commit('updatePlaying', false)
                commit('updatePlay', true,  { root: true })
                dispatch('fixedplay/playAudio', true, { root: true })
                return;
            }
            commit('updateSongs', new Array(getters.songs.length).fill(false))
            getters.songs[payload] = true;
            if(getters.listTop100[payload].src != rootGetters.srcPlay){
                //sau khi update src moi thi load() lai audio
                var aud = document.getElementById("myAudio")
                aud.load()
            }
            commit('updateSrcPlay', getters.listTop100[payload].src, {root: true})
            commit('fixedplay/src', getters.listTop100[payload].src, {root: true})
            
            // commit('updateSongs', getters.songs)
            commit('updatePlaying', true)
            commit('updatePlay', false,  { root: true })
            dispatch('fixedplay/playAudio', false, { root: true })
        },
        playingAction({commit, getters}){
            let inc = 10
            let dec = 50
            var interval;
            if(getters.playing){
                interval = setInterval(() => {
                    commit('updateBorderRadius', (inc +'%'))
                    if(inc == 50){
                        clearInterval(interval)
                    }
                    inc += 5
                },10)
            }else{
                interval = setInterval(() => {
                    commit('updateBorderRadius', (dec +'%'))
                    if(dec == 10){
                        clearInterval(interval)
                    }
                    dec -= 5
                },10)
            }
        }
    },
    mutations: {
        updateHeight(state, payload){
            state.height = payload
        },
        updatePlaying(state, payload){
            state.playing = payload
        },
        updateSongs(state, payload){
            state.songs = payload
        },
        updateBorderRadius(state, payload){
            state.borderRadius = payload
        }
    }
}